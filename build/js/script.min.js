"use strict";const staffList=document.querySelector(".js-staff-list"),employeeTemplate=document.querySelector("#employee").content.querySelector(".vacation-schedule__employee"),popupTemplate=document.querySelector("#popup").content.querySelector(".popup"),data=[{photo:"img/photo.png",name:"Иван Иванов",days:"14/28",vacations:[{startDay:"22.04.2019",endDay:"30.04.2019",color:"#F16953"},{startDay:"20.05.2019",endDay:"31.05.2019",color:"#1EBEB4"}]},{photo:"img/photo-2.png",name:"Катерина Иванова",days:"14/28",vacations:[{startDay:"05.08.2019",endDay:"18.08.2019",color:"#1EBEB4"}]},{photo:"img/photo.png",name:"Иван Иванов",days:"14/28",vacations:[{startDay:"25.03.2019",endDay:"01.04.2019",color:"#1EBEB4"},{startDay:"20.05.2019",endDay:"02.06.2019",color:"#1EBEB4"},{startDay:"24.06.2019",endDay:"30.06.2019",color:"#1EBEB4"},{startDay:"16.09.2019",endDay:"22.09.2019",color:"#F16953"},{startDay:"30.09.2019",endDay:"30.09.2019",color:"#F16953"}]},{photo:"img/photo.png",name:"Иван Иванов",days:"14/28",vacations:[{startDay:"18.03.2019",endDay:"24.03.2019",color:"#FCC659"}]},{photo:"img/photo.png",name:"Иван Иванов",days:"14/28",vacations:[{startDay:"29.04.2019",endDay:"30.04.2019",color:"#F16953"},{startDay:"20.05.2019",endDay:"31.05.2019",color:"#1EBEB4"}]}];function addEmployeeElements(e){let t=document.createDocumentFragment();e.forEach((function(e){let a=generateEmployeeElement(e);t.append(a)})),staffList.append(t)}function generateEmployeeElement(e){let t=employeeTemplate.cloneNode(!0),a=t.querySelector(".vacation-schedule__employee-photo img");a.src=e.photo,a.alt=e.name,t.querySelector(".vacation-schedule__employee-name").textContent=e.name,t.querySelector(".vacation-schedule__days").textContent=e.days;for(let e=0;e<12;e++){let a=generateMonthElement(e);t.append(a)}let o=t.querySelectorAll(".vacation-schedule__month");return e.vacations.forEach((function(e){let t=Number(e.startDay.slice(0,2))-1,a=Number(e.startDay.slice(3,5))-1,n=Number(e.endDay.slice(0,2)),l=Number(e.endDay.slice(3,5))-1,r=o[a].querySelectorAll(".vacation-schedule__day[style]");if(a===l){let a=n-t;for(let o=t;o<t+a;o++)addVacations(r[o],e)}else{for(let a=t;a<r.length;a++)addVacations(r[a],e);let a=o[l].querySelectorAll(".vacation-schedule__day[style]");for(let t=0;t<n;t++)addVacations(a[t],e)}})),t}function addVacations(e,t){e.style.backgroundColor=t.color,e.style.cursor="pointer"}function generateMonthElement(e){let t=document.createElement("div");t.classList.add("vacation-schedule__month");let a=new Date(2019,e);for(let e=0;e<getDay(a);e++){let e=generateDayElement();t.append(e)}let o=new Date(2019,e+1,0).getDate(),n=new Date(2019,2,9);for(let a=0;a<o;a++){let o=generateDayElement(),l=new Date(2019,e,a);o.style.backgroundColor=l>n?"#EAF9FF":"#F6F6F6",t.append(o)}return t}function generateDayElement(){let e=document.createElement("div");return e.classList.add("vacation-schedule__day"),e}function getDay(e){let t=e.getDay();return 0==t&&(t=7),t-1}addEmployeeElements(data);